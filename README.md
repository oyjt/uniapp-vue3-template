# uniapp å›¢é˜Ÿåä½œå¼€å‘å®è·µæ¨¡æ¿(Vue3)

[![GitHub Repo stars](https://img.shields.io/github/stars/oyjt/uniapp-vue3-template?style=flat&logo=github)](https://github.com/oyjt/uniapp-vue3-template)
[![GitHub forks](https://img.shields.io/github/forks/oyjt/uniapp-vue3-template?style=flat&logo=github)](https://github.com/oyjt/uniapp-vue3-template)
[![node version](https://img.shields.io/badge/node-%3E%3D18-green)](https://github.com/oyjt/uniapp-vue3-template)
[![pnpm version](https://img.shields.io/badge/pnpm-%3E%3D8-green)](https://github.com/oyjt/uniapp-vue3-template)
[![GitHub package.json version (subfolder of monorepo)](https://img.shields.io/github/package-json/v/oyjt/uniapp-vue3-template)](https://github.com/oyjt/uniapp-vue3-template)
[![GitHub License](https://img.shields.io/github/license/oyjt/uniapp-vue3-template)](https://github.com/oyjt/uniapp-vue3-template)


ä½¿ç”¨uniapp+vite+vue3+typescript+uview-plus+unocss æ­å»ºçš„é€‚åˆå›¢é˜Ÿåä½œçš„å¿«é€Ÿå¼€å‘æ¨¡ç‰ˆ

[uview-pluså®˜æ–¹æ–‡æ¡£](https://uiadmin.net/uview-plus/)

æœ¬é¡¹ç›®é›†ä¼—å¤šé¡¹ç›®çš„ä¼˜ç‚¹ï¼Œæ‰“é€ æœ€é€‚åˆå›¢é˜Ÿåä½œå¼€å‘çš„é¡¹ç›®æ¨¡æ¿ã€‚

åœ¨çº¿é¢„è§ˆåœ°å€ï¼š[https://oyjt.github.io/uniapp-vue3-template/](https://oyjt.github.io/uniapp-vue3-template/)

### ç‰¹æ€§

- [x] é›†æˆ`uview-plus3.0 ui`åº“
- [x] æ”¯æŒå¤šç¯å¢ƒæ‰“åŒ…æ„å»º
- [x] ä½¿ç”¨`pinia`çŠ¶æ€ç®¡ç†
- [x] å°è£…ç½‘ç»œè¯·æ±‚ï¼Œå¹¶æ”¯æŒ`Typescript`
- [x] æ”¯æŒè·¯å¾„åˆ«å
- [x] æ”¯æŒè‡ªåŠ¨åŠ è½½ç»„ä»¶å’Œ`API`
- [x] è‡ªåŠ¨æ ¡éªŒ`git`æäº¤ä»£ç æ ¼å¼
- [x] é›†æˆ`ESLint`ã€`StyleLint`ã€`EditorConfig`ä»£ç æ ¼å¼è§„èŒƒ
- [x] `Typescript`æ”¯æŒ
- [x] é›†æˆ`UnoCSS`
- [x] é›†æˆ`iconify`å›¾æ ‡åº“
- [x] é›†æˆ`z-paging`ä¸‹æ‹‰åˆ·æ–°åŠŸèƒ½
- [x] æ·»åŠ é¡µé¢è·³è½¬æ‹¦æˆªï¼Œç™»å½•æƒé™æ ¡éªŒ
- [x] æ”¯æŒ`token`æ— æ„Ÿåˆ·æ–°
- [x] é¡¹ç›®åˆ†åŒ…
- [x] é›†æˆå°ç¨‹åºéšç§åè®®æˆæƒç»„ä»¶
- [x] é¡¹ç›®æ„å»ºè‡ªåŠ¨åˆ é™¤æœ¬åœ°å›¾ç‰‡å¹¶æ›¿æ¢æœ¬åœ°å›¾ç‰‡è·¯å¾„ä¸ºçº¿ä¸Šå›¾ç‰‡
- [x] é›†æˆåŒ…ä½“ç§¯è§†å›¾åˆ†ææ’ä»¶
- [x] æ”¯æŒå›½é™…åŒ–
- [x] é›†æˆ`alova`ç½‘ç»œè¯·æ±‚ï¼ˆå…·ä½“ä½¿ç”¨è¯·åˆ‡æ¢åˆ° [feature/alova](https://github.com/oyjt/uniapp-vue3-template/tree/feature/alova) åˆ†æ”¯ï¼‰
- [x] é›†æˆ`axios`ç½‘ç»œè¯·æ±‚ï¼ˆå…·ä½“ä½¿ç”¨è¯·åˆ‡æ¢åˆ° [feature/axios](https://github.com/oyjt/uniapp-vue3-template/tree/feature/axios) åˆ†æ”¯ï¼‰

### uniappæ’ä»¶æ¨è
- [uniapp æ’ä»¶ç²¾é€‰ï¼ˆhttps://github.com/oyjt/awesome-uniappï¼‰](https://github.com/oyjt/awesome-uniapp)

### ç›®å½•ç»“æ„
é¡¹ç›®ä¸­é‡‡ç”¨ç›®å‰æœ€æ–°çš„æŠ€æœ¯æ–¹æ¡ˆæ¥å®ç°ï¼Œç›®å½•ç»“æ„æ¸…æ™°ã€‚
```
uniapp-vue3-project
â”œ build                 viteé…ç½®ç»Ÿä¸€ç®¡ç†
â”‚  â”œ config
â”‚  â”” plugins
â”œ env                   ç¯å¢ƒå˜é‡
â”œ scripts               ä¸€äº›è„šæœ¬
â”‚  â”œ post-upgrade.js     ä¾èµ–åº“æ¸…ç†
â”‚  â”” verify-commit.js    gitæäº¤æ£€éªŒ
â”œ src
â”‚  â”œ api                æ¥å£ç®¡ç†
â”‚  â”œ components         å…¬å…±ç»„ä»¶
â”‚  â”œ hooks              å¸¸ç”¨hookså°è£…
â”‚  â”œ locale             å›½é™…åŒ–è¯­è¨€ç®¡ç†
â”‚  â”œ pages              é¡µé¢ç®¡ç†
â”‚  â”œ plugins            æ’ä»¶ç®¡ç†
â”‚  â”œ router             è·¯ç”±ç®¡ç†
â”‚  â”œ static             é™æ€èµ„æº
â”‚  â”œ store              çŠ¶æ€ç®¡ç†
â”‚  â”œ utils              ä¸€äº›å·¥å…·
â”‚  â”œ App.vue
â”‚  â”œ main.ts
â”‚  â”œ manifest.json      é¡¹ç›®é…ç½®
â”‚  â”œ pages.json         é¡µé¢é…ç½®
â”‚  â”” uni.scss           å…¨å±€scsså˜é‡
â”œ types                 å…¨å±€typescriptç±»å‹æ–‡ä»¶
â”‚  â”œ auto-imports.d.ts
â”‚  â”œ components.d.ts
â”‚  â”œ global.d.ts
â”‚  â”” module.d.ts
â”œ LICENSE
â”œ README.md
â”œ cz.config.js          cz-gité…ç½®
â”œ eslint.config.js      eslinté…ç½®
â”œ index.html
â”œ package.json
â”œ pnpm-lock.yaml
â”œ stylelint.config.js   stylelinté…ç½®
â”œ tsconfig.json
â”œ uno.config.ts         unocssé…ç½®
â”” vite.config.ts        viteé…ç½®
```

#### viteæ’ä»¶ç®¡ç†
```
build
â”œ config            viteé…ç½®
â”‚  â”œ index.ts       å…¥å£æ–‡ä»¶
â”‚  â”” proxy.ts       è·¨åŸŸä»£ç†é…ç½®
â”” plugins           viteæ’ä»¶
   â”œ autoImport.ts  è‡ªåŠ¨å¯¼å…¥api
   â”œ cleanImage.ts  è‡ªåŠ¨æ¸…ç†å›¾ç‰‡æ–‡ä»¶
   â”œ component.ts   è‡ªåŠ¨å¯¼å…¥ç»„ä»¶
   â”œ imagemin.ts    å›¾ç‰‡å‹ç¼©
   â”œ index.ts       å…¥å£æ–‡ä»¶
   â”œ replaceUrl.ts  è‡ªåŠ¨æ›¿æ¢å›¾ç‰‡åœ°å€ä¸ºCDNåœ°å€
   â”œ unocss.ts      unocssé…ç½®
   â”” visualizer.ts  åŒ…ä½“ç§¯è§†å›¾åˆ†æ

```

#### æ¥å£ç®¡ç†
```
api
â”œ common       é€šç”¨api
â”‚  â”œ index.ts
â”‚  â”” types.ts
â”œ user         ç”¨æˆ·ç›¸å…³api
â”‚  â”œ index.ts
â”‚  â”” types.ts
â”” index.ts     å…¥å£æ–‡ä»¶
```

#### hooksç®¡ç†
```
hooks
â”œ use-clipboard  å‰ªåˆ‡æ¿
â”‚  â”” index.ts
â”œ use-loading    loading
â”‚  â”” index.ts
â”œ use-modal      æ¨¡æ€æ¡†
â”‚  â”” index.ts
â”œ use-permission æ ¡éªŒæƒé™
â”‚  â”” index.ts
â”œ use-share      åˆ†äº«
â”‚  â”” index.ts
â”” index.ts       å…¥å£æ–‡ä»¶
```

### é¡µé¢ç®¡ç†
```
pages
â”œ common           å…¬å…±é¡µé¢ï¼ˆåˆ†åŒ…commonï¼‰
â”‚  â”œ login
â”‚  â”‚  â”” index.vue
â”‚  â”” webview
â”‚     â”” index.vue
â”” tab              ä¸»é¡µé¢ï¼ˆä¸»åŒ…ï¼‰
   â”œ home
   â”‚  â”” index.vue
   â”œ list
   â”‚  â”” index.vue
   â”” user
      â”” index.vue
```

#### çŠ¶æ€ç®¡ç†
```
store
â”œ modules
â”‚  â”œ app          appçŠ¶æ€
â”‚  â”‚  â”œ index.ts
â”‚  â”‚  â”” types.ts
â”‚  â”” user         ç”¨æˆ·çŠ¶æ€
â”‚     â”œ index.ts
â”‚     â”” types.ts
â”” index.ts        å…¥å£æ–‡ä»¶
```

### å·¥å…·æ–¹æ³•
```
utils
â”œ auth                tokenç›¸å…³æ–¹æ³•
â”‚  â”” index.ts
â”œ common              é€šç”¨æ–¹æ³•
â”‚  â”” index.ts
â”œ modals              å¼¹çª—ç›¸å…³æ–¹æ³•
â”‚  â”” index.ts
â”œ request             ç½‘ç»œè¯·æ±‚ç›¸å…³æ–¹æ³•
â”‚  â”œ index.ts
â”‚  â”œ interceptors.ts
â”‚  â”œ status.ts
â”‚  â”” types.ts
â”” index.ts            å…¥å£æ–‡ä»¶
```

### ä½¿ç”¨æ–¹æ³•

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨H5
pnpm dev:h5

# å¯åŠ¨å¾®ä¿¡å°ç¨‹åº
pnpm dev:mp-weixin
```

### å‘å¸ƒ

```bash
# æ„å»ºå¼€å‘ç¯å¢ƒ
pnpm build:h5
pnpm build:mp-weixin

# æ„å»ºæµ‹è¯•ç¯å¢ƒ
pnpm build:h5-test
pnpm build:mp-weixin-test

# æ„å»ºç”Ÿäº§ç¯å¢ƒ
pnpm build:h5-prod
pnpm build:mp-weixin-prod
```

### ä»£ç æäº¤
```bash
pnpm cz
```

### æ›´æ–°uniappç‰ˆæœ¬

æ›´æ–°uniappç›¸å…³ä¾èµ–åˆ°æœ€æ–°æ­£å¼ç‰ˆ
```bash
npx @dcloudio/uvm@latest
```
æˆ–è€…æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤
```bash
pnpm uvm
```

åœ¨å‡çº§å®Œåï¼Œä¼šè‡ªåŠ¨æ·»åŠ å¾ˆå¤šæ— ç”¨ä¾èµ–ï¼Œæ‰§è¡Œä¸‹é¢çš„ä»£ç å‡å°ä¿ä½“ç§¯
```
pnpm uvm-rm
```

### `v3` ä»£ç å—
åœ¨ `vue` æ–‡ä»¶ä¸­ï¼Œè¾“å…¥ `v3` æŒ‰ `tab` å³å¯å¿«é€Ÿç”Ÿæˆé¡µé¢æ¨¡æ¿ï¼Œå¯ä»¥å¤§å¤§åŠ å¿«é¡µé¢ç”Ÿæˆã€‚
> åŸç†ï¼šåŸºäº VSCode ä»£ç å—ç”Ÿæˆã€‚

### ç™»å½•é‰´æƒ
1. é¡µé¢å¦‚æœéœ€è¦ç™»å½•æ‰èƒ½è®¿é—®ï¼Œåªéœ€åœ¨ `pages.json` æ–‡ä»¶ä¸­éœ€è¦é‰´æƒçš„é¡µé¢ä¸‹è®¾ç½® `needLogin` å±æ€§è®¾ç½®ä¸º `true` å³å¯ï¼Œæ¯”å¦‚
```
{
  "pages": [
    {
      "path": "pages/test/test",
      "needLogin": true,
      "style": {
        "navigationBarTitleText": "",
      },
    }
  ]
}
```

2. å¦‚æœæœ‰`tab`é¡µé¢éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®ï¼Œä¸Šé¢çš„è®¾ç½®åœ¨å°ç¨‹åºä¸­ç‚¹å‡»`tabbar`æ—¶æ— æ•ˆï¼Œå› ä¸ºåœ¨å°ç¨‹åºä¸­ç‚¹å‡»tabbarä¸ä¼šè§¦å‘`uni.switchTab`æ–¹æ³•ï¼Œä¸‹é¢æ˜¯å®˜æ–¹ç»™å‡ºçš„å›å¤åŠè§£å†³æ–¹æ¡ˆã€‚

> æ‹¦æˆªuni.switchTabæœ¬èº«æ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯åœ¨å¾®ä¿¡å°ç¨‹åºç«¯ç‚¹å‡»tabbarçš„åº•å±‚é€»è¾‘å¹¶ä¸æ˜¯è§¦å‘uni.switchTabã€‚æ‰€ä»¥è¯¯è®¤ä¸ºæ‹¦æˆªæ— æ•ˆï¼Œæ­¤ç±»åœºæ™¯çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨tabbaré¡µé¢çš„é¡µé¢ç”Ÿå‘½å‘¨æœŸonShowä¸­å¤„ç†ã€‚

å¯å‚è€ƒ`pages/tab/user/index.vue`ä¸­çš„ä»£ç ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š
```
<script setup lang="ts">
// å¼•å…¥é‰´æƒhooks
import { usePermission } from "@/hooks";

onShow(async () => {
  console.log("tabbar page onShow");
  const hasPermission = await usePermission();
  console.log(hasPermission ? "å·²ç™»å½•" : "æœªç™»å½•ï¼Œæ‹¦æˆªè·³è½¬");
});
</script>
```

### æ³¨æ„äº‹é¡¹
1. å¦‚æœé¡¹ç›®ä¸­ä¸éœ€è¦å‹ç¼©å›¾ç‰‡ï¼Œå¯ä»¥ç§»é™¤`vite-plugin-imagemin`æ’ä»¶åå†åˆå§‹åŒ–ï¼Œä»¥é¿å…ç”±äºç½‘è·¯é—®é¢˜é€ æˆåˆå§‹åŒ–æŠ¥é”™çš„æƒ…å†µ
2. å¾®ä¿¡å°ç¨‹åºå¼€å‘è€…å·¥å…·ä¸­å†…ç½®çš„æ‰“åŒ…åˆ†æä¸å‡†ç¡®ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨äº†`rollup-plugin-visualizer`æ¥åˆ†æå°ç¨‹åºåŒ…ä½“ç§¯ï¼Œé»˜è®¤ä¸å¼€å¯ï¼Œæœ‰éœ€è¦çš„ç§»é™¤ç›¸å…³æ³¨é‡Šå³å¯
3. è‡ªåŠ¨æ„å»ºå¤„ç†æœ¬åœ°å›¾ç‰‡èµ„æºï¼Œä½¿ç”¨äº†`vite-plugin-clean-build`å’Œ`vite-plugin-replace-image-url`è¿™ä¸¤ä¸ªæ’ä»¶ï¼Œé»˜è®¤ä¸å¼€å¯ç›¸å…³åŠŸèƒ½ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å†`build/vite/plugins/index.ts`æ–‡ä»¶ä¸­ç§»é™¤ç›¸å…³æ³¨é‡Šå³å¯
4. ä½¿ç”¨`vite-plugin-replace-image-url`æ’ä»¶ï¼Œæƒ³è¦å›¾ç‰‡è‡ªåŠ¨æ›¿æ¢ç”Ÿæ•ˆï¼Œéœ€è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ç»å¯¹è·¯å¾„å¼•å…¥å›¾ç‰‡èµ„æºï¼Œå¦‚ä¸‹ç¤ºä¾‹æ‰€ç¤ºã€‚

    ç¤ºä¾‹ä¸€ï¼šstyleä¸­çš„å›¾ç‰‡ä½¿ç”¨
    ```
    <template>
      <view :style="`background-image: url('${bgImg}')`">
        ...
      </view>
    </template>
    <script setup lang="ts">
    import bgImg from '@/static/images/bg_img.png';
    </script>
    ```

    ç¤ºä¾‹äºŒï¼šjsä¸­çš„å›¾ç‰‡ä½¿ç”¨

    ```
    <script setup lang="ts">
    import walletIcon from '@/static/images/icon_wallet.png';
    const menuList = [
      {
        name: 'wallet',
        title: 'é’±åŒ…',
        icon: walletIcon,
      },
      ...
    ];
    </script>
    ```

    ç¤ºä¾‹äºŒï¼šcssä¸­çš„å›¾ç‰‡ä½¿ç”¨
    ```
    <style lang="scss">
    .icon {
      background-image: url('@/static/images/icon.png')
    }
    </style>
    ```

6. éƒ¨åˆ†ç”¨æˆ·æ„å»ºå¾®ä¿¡å°ç¨‹åºå¦‚ä¸‹é”™è¯¯ï¼ŒåŸå› æ˜¯å¾®ä¿¡å¼€å‘è€…å·¥å…·ç¼ºå¤±äº†å¯¹åº”çš„ä¾èµ–ã€‚
```
This @babel/plugin-proposal-private-property-in-object version is not meant to
be imported.
```
æ­¤æ—¶å‡çº§å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œæˆ–è€…å®‰è£…`@babel/plugin-proposal-private-property-in-object`ä¾èµ–å³å¯è§£å†³é—®é¢˜ã€‚

### æèµ 

å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·ä½œè€…å–é¥®æ–™ğŸ¹

<p align='center'>
<img alt="å¾®ä¿¡æ”¶æ¬¾ç " src="./src/static/images/pay.png" height="330" style="display:inline-block; height:330px;">
</p>
